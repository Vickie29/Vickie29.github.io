{"title":"教女友学会 python+yolov3 调用笔记本摄像头——实时进行识别","slug":"教女友学会python+yolov3调用笔记本摄像头——实时进行识别","date":"2020-06-17","updated":"2020-06-17","comments":true,"path":"api/posts/60092.json","excerpt":"<blockquote><p>我终于回来啦，快一个月没有正式写博客了 <br> 最近忙着把老师交给我的项目完成，又从老师经费里白嫖了好多好玩的硬件，网课都没咋听，今天介绍完这个小点，马上就要准备看模电了 <br> 其实我做项目时完全从 0 开始，所接触的东西也是零零散散的，我想表达的东西用面向新手的方式写出来，之后开始介绍软硬件结合的东西。<br>也可以加我的交流群，所有资料我会在群里分享出来哦：977947271<br>2020/5/30：<br>近日每天都有十几个很明显的小号加群，而且有的大号进群竟然打广告和卖不良物品，经我和群友讨论后，加群需要 1 元钱，但是进群后我会将钱退还给大家，只是为了过滤一些不好的人。</p></blockquote><blockquote><p>环境：win10、py3.6、yolov3</p></blockquote>","cover":"https://img-blog.csdnimg.cn/20200504155521890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","covers":["https://img-blog.csdnimg.cn/20200504155521890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504155725333.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504160013801.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504160219163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504160359383.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504160624971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504161144308.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504162339142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504163355373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","https://img-blog.csdnimg.cn/20200504165237970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70"],"content":"<blockquote>\n<p>我终于回来啦，快一个月没有正式写博客了 <br> 最近忙着把老师交给我的项目完成，又从老师经费里白嫖了好多好玩的硬件，网课都没咋听，今天介绍完这个小点，马上就要准备看模电了 <br> 其实我做项目时完全从 0 开始，所接触的东西也是零零散散的，我想表达的东西用面向新手的方式写出来，之后开始介绍软硬件结合的东西。<br>也可以加我的交流群，所有资料我会在群里分享出来哦：977947271<br>2020/5/30：<br>近日每天都有十几个很明显的小号加群，而且有的大号进群竟然打广告和卖不良物品，经我和群友讨论后，加群需要 1 元钱，但是进群后我会将钱退还给大家，只是为了过滤一些不好的人。</p>\n</blockquote>\n<blockquote>\n<p>环境：win10、py3.6、yolov3</p>\n</blockquote>\n<a id=\"more\"></a>\n<h2 id=\"1、准备工作\"><a href=\"#1、准备工作\" class=\"headerlink\" title=\"1、准备工作\"></a>1、准备工作</h2><p><strong>1、yolo3 源代码：</strong><a href=\"https://github.com/qqwweee/keras-yolo3\" target=\"_blank\" rel=\"noopener\">github_keras-yolo3</a></p>\n<p><strong>2、权重文件：</strong>：<a href=\"https://pjreddie.com/media/files/yolov3.weights\" target=\"_blank\" rel=\"noopener\">官网_yolov3_weights</a>（点击直接下载）或者 我的百度网盘文件 链接：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://pan.baidu.com/s/<span class=\"number\">1</span>YD5dtSrEkcBO0PRHO7eLlw </span><br><span class=\"line\">提取码：<span class=\"number\">1</span>uub</span><br></pre></td></tr></table></figure>\n\n\n<p>我也有自己训练的只识别 person 的权重文件，有需要的话可以评论邮箱地址 <br> 如果你是新手中的新手，可以先参考下我的这两篇文章：<br>1、<a href=\"https://blog.csdn.net/qq_45504119/article/details/105033492\" target=\"_blank\" rel=\"noopener\">keras-yolov3 目标检测详解——适合新手</a>（教你运行成功 yolo）<br>2、<a href=\"https://blog.csdn.net/qq_45504119/article/details/105052478\" target=\"_blank\" rel=\"noopener\">win10+yolov3+python 训练自己的模型</a>（教你训练自己的模型去识别）</p>\n<h2 id=\"2、添加 yolo 模型\"><a href=\"#2、添加 yolo 模型\" class=\"headerlink\" title=\"2、添加 yolo 模型\"></a>2、添加 yolo 模型 </h2><p> 先将 yolov3.weights 权重放在下载的 yolo 文件中</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504155521890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>我这里用 pycharm 打开 yolo 源代码，<br>在命令行输入：<code>python convert.py yolov3.cfg yolov3.weights model_data/yolo.h5</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504155725333.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>运行命令直到出现：<code>Saved Keras model to model_data/yolo.h5</code> </p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504160013801.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>且 model_data 中多了个 yolo.h5 文件就代表准备工作完成了</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504160219163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<h2 id=\"3、改代码并运行\"><a href=\"#3、改代码并运行\" class=\"headerlink\" title=\"3、改代码并运行\"></a>3、改代码并运行 </h2><p> 打开 yolo.py 大概在 170 多行的位置找到：<code>vid = cv2.VideoCapture(video_path)</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504160359383.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>将其改为：<code>vid = cv2.VideoCapture(0)</code></p>\n<p>这里我们使用 opencv 库中的 VideoCapture()函数创建摄像头对象，参数 0 是表示调用第一个摄像头，一般就是笔记本的内置摄像头。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504160624971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>然后打开 yolo_video.py 并运行 <br> 下面是我刚刚运行并演示出的效果，手机拿的有些近，所以没有识别出手机</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504161144308.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>不过细心的朋友看下代码就知道，其实这种方法实际上是读取摄像头某一帧的画面，对此画面进行图片式的识别。但是我们很多项目其实并不要求保存视频，或者处理的很流畅，我们需求就是单纯识别的话这种方法完全满足项目的需要了。<br>.</p>\n<h2 id=\"4、用自己训练的模型来识别\"><a href=\"#4、用自己训练的模型来识别\" class=\"headerlink\" title=\"4、用自己训练的模型来识别\"></a>4、用自己训练的模型来识别 </h2><p> 上图有些瑕疵，只识别出了 person，但我拿开手机的话，我背后的很多物品，官方的权重都能识别，包括手机壳上的小狗。</p>\n<p>但是很多情况下我们只想让他识别出一种或几种物品怎么办呢？</p>\n<p>比如我之前训练出的只能识别出人的的权重，下面就介绍一下方法。</p>\n<p>可以看我这篇文章：<a href=\"https://blog.csdn.net/qq_45504119/article/details/105052478\" target=\"_blank\" rel=\"noopener\">win10+yolov3+python 训练自己的模型——适合新手</a> 去自己训练出模型。</p>\n<p>也可以直接用我训练的模型：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">链接：https://pan.baidu.com/s/<span class=\"number\">1</span>NSR2XC-SmId9O1E0QvNGcg </span><br><span class=\"line\">提取码：cs99</span><br><span class=\"line\">&gt;&gt;&gt; 网盘下载的慢的话可以评论下邮箱，QQ 传文件还是蛮快的 &lt;&lt;&lt;</span><br></pre></td></tr></table></figure>\n<p>将我的模型下载好后放在 model_data 文件夹中，改名为：yolo.h5 </p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504162339142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>像上文一样运行 yolo_video.py 文件就可以了。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200504163355373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>我也只是个学生，做项目的时候刚好看到 yolo 了，就玩了一阵子，这些只是很简单的东西，之后我会慢慢的把我做的比较深入的东西写出来 (说实话…一般没人看)，所以呢，今天 2020/5/4，我准备创建一个开源项目的交流群。<br> 我本身很菜，但是玩过一些开源的项目，本身电气专业，也喜欢自己用单片机做东西，现在自己发过论文、国际发明专利、国内发明专利。马上准备考研了，也希望能遇到一些大佬，给些指点，也可以大家一起讨论问题，解决问题。</p>\n<p>群号：977947271<br><img src=\"https://img-blog.csdnimg.cn/20200504165237970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n","url":"/posts/60092/","min2read":3,"word4post":"1.1k","prev_post":{"title":"运行 SSD-TensorFlow 报错：tensorflow.python.framework.errors_impl.NotFoundError：","url":"/posts/15660/"},"next_post":{"title":"关于 yolo 配合硬件的小结——个人笔记","url":"/posts/56562/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"1、准备工作\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">1、准备工作</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"2、添加 yolo 模型\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">2、添加 yolo 模型 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"3、改代码并运行\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">3、改代码并运行 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"4、用自己训练的模型来识别\" href = \"#\"><span class=\"toc-number\">4.</span> <span class=\"toc-text\">4、用自己训练的模型来识别 </span></a></li></ol>","categories":[{"name":"python","path":"api/categories/python.json","url":"/categories/python/"},{"name":"机器视觉","path":"api/categories/机器视觉.json","url":"/categories/python/机器视觉/"}],"tags":[{"name":"python","path":"api/tags/python.json","url":"/tags/python/"},{"name":"机器视觉","path":"api/tags/机器视觉.json","url":"/tags/机器视觉/"}]}