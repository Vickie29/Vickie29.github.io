{"title":"MATLAB 的global函数（全局变量）—从python和MAT实例中详细解释","slug":"MATLAB 的global函数（全局变量）—从python和MAT实例中详细解释","date":"2020-06-17","updated":"2020-07-08","comments":true,"path":"api/posts/43318.json","excerpt":"<p>今天本来发布了用摄像头 gui 拍照的程序，然后有人私信我问其中的global函数的使用方法。</p><p>我想了一下，就以摄像头拍照为例子去解释一下这个函数的用法吧。</p><p>但是首先用python中的一个小例子来说明一下：</p>","cover":"https://img-blog.csdnimg.cn/20200219193459740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70","covers":["https://img-blog.csdnimg.cn/20200219193459740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70"],"content":"<p>今天本来发布了用摄像头 gui 拍照的程序，然后有人私信我问其中的global函数的使用方法。</p>\n<p>我想了一下，就以摄像头拍照为例子去解释一下这个函数的用法吧。</p>\n<p>但是首先用python中的一个小例子来说明一下：</p>\n<a id=\"more\"></a>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt;YOU = <span class=\"string\">'老大'</span></span><br><span class=\"line\">&gt;&gt;&gt;<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fun</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">\t\tYOU = <span class=\"string\">'老二'</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">print</span>（YOU）</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt;fun()</span><br><span class=\"line\">&gt;&gt;&gt;print(YOU)</span><br></pre></td></tr></table></figure>\n<p>大家应该知道结果是</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">老二</span><br><span class=\"line\">老大</span><br></pre></td></tr></table></figure>\n<p>但如果使用global：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> I = <span class=\"string\">'老大'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fun</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> I</span><br><span class=\"line\">    I=<span class=\"string\">'老二'</span>    </span><br><span class=\"line\">    print(I)</span><br><span class=\"line\">    </span><br><span class=\"line\">fun()</span><br><span class=\"line\">print(I)</span><br></pre></td></tr></table></figure>\n<p>在这里简单想下就是使用global定义之后，函数内的变量也就可以被改变了</p>\n<p>就像变量与参数之间的关系，但是使用global之后，参数就变成真实的变量了，可以在define的函数中改变之前定义的值，很有意思。</p>\n<p>结果可想而知：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">老二</span><br><span class=\"line\">老二</span><br><span class=\"line\">%%%%%谁**是老二啊？？？！！！要当就当老大啊！！！</span><br></pre></td></tr></table></figure>\n<p>所以代码应该改成这样：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> I = <span class=\"string\">'你是老二吧，哈哈'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fun</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> I</span><br><span class=\"line\">    I=<span class=\"string\">'我才是老大，哈哈哈哈'</span>    </span><br><span class=\"line\">    print(I)</span><br><span class=\"line\">    </span><br><span class=\"line\">fun()</span><br><span class=\"line\">print(I)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">我才是老大，哈哈哈哈</span><br><span class=\"line\">我才是老大，哈哈哈哈</span><br></pre></td></tr></table></figure>\n\n<p>OK 现在返回的就是你心底最先说的话吧，，哈哈，不开玩笑了……</p>\n<p>下面看看在matlab实例项目中的应用吧：</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20200219193459740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTA0MTE5,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>话不多说，直接上代码：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">function <span class=\"title\">pushbutton1_Callback</span><span class=\"params\">(hObject, eventdata, handles)</span></span></span><br><span class=\"line\"><span class=\"function\">% hObject    handle to <span class=\"title\">pushbutton1</span> <span class=\"params\">(see GCBO)</span></span></span><br><span class=\"line\"><span class=\"function\">% eventdata  reserved - to be defined in a future version of MATLAB</span></span><br><span class=\"line\"><span class=\"function\">% handles    structure with handles and user <span class=\"title\">data</span> <span class=\"params\">(see GUIDATA)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\tvid </span>= videoinput(<span class=\"string\">'winvideo'</span>,<span class=\"number\">1</span>);%调用摄像头</span><br><span class=\"line\">\t\taxes = (handles.axes1);%指定figure</span><br><span class=\"line\">\t\tpreview(vid);%显示视频</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pushbutton2_Callback</span>(<span class=\"params\">hObject, eventdata, handles</span>)</span></span><br><span class=\"line\">% hObject    handle to pushbutton2 (see GCBO)</span><br><span class=\"line\">% eventdata  reserved - to be defined <span class=\"keyword\">in</span> a future version <span class=\"keyword\">of</span> MATLAB</span><br><span class=\"line\">% handles    structure <span class=\"keyword\">with</span> handles and user data (see GUIDATA)</span><br><span class=\"line\">\t\tframe = getsnapshot(vid);%获取每一帧</span><br><span class=\"line\">\t\tI = ycbcr2rgb(frame);%RGB图像</span><br><span class=\"line\">\t\timwrite(I,<span class=\"string\">'csdn.png'</span>);</span><br></pre></td></tr></table></figure>\n<p>如果我代码是这样的话，命令行一定会报错：未定义变量‘vid’</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">未定义函数或变量 <span class=\"string\">'vid'</span>。</span><br></pre></td></tr></table></figure>\n\n<p>大家看到pushbutton_1中定义vid在pushbutton_2中调用不了</p>\n<p>理由很简单，vid是push_1中的局部变量</p>\n<p>所以解决这个问题最好就是在push_1和push_2中把vid定义为全局变量</p>\n<p>而实现这个操作的就是global函数。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">function <span class=\"title\">pushbutton1_Callback</span><span class=\"params\">(hObject, eventdata, handles)</span></span></span><br><span class=\"line\"><span class=\"function\">% hObject    handle to <span class=\"title\">pushbutton1</span> <span class=\"params\">(see GCBO)</span></span></span><br><span class=\"line\"><span class=\"function\">% eventdata  reserved - to be defined in a future version of MATLAB</span></span><br><span class=\"line\"><span class=\"function\">% handles    structure with handles and user <span class=\"title\">data</span> <span class=\"params\">(see GUIDATA)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t<span class=\"title\">global</span><span class=\"params\">(vid)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\tvid </span>= videoinput(<span class=\"string\">'winvideo'</span>,<span class=\"number\">1</span>);%调用摄像头</span><br><span class=\"line\">\t\taxes = (handles.axes1);%指定figure</span><br><span class=\"line\">\t\tpreview(vid);%显示视频</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pushbutton2_Callback</span>(<span class=\"params\">hObject, eventdata, handles</span>)</span></span><br><span class=\"line\">% hObject    handle to pushbutton2 (see GCBO)</span><br><span class=\"line\">% eventdata  reserved - to be defined <span class=\"keyword\">in</span> a future version <span class=\"keyword\">of</span> MATLAB</span><br><span class=\"line\">% handles    structure <span class=\"keyword\">with</span> handles and user data (see GUIDATA)</span><br><span class=\"line\">\t\tglobal(vid)</span><br><span class=\"line\">\t\tframe = getsnapshot(vid);%获取每一帧</span><br><span class=\"line\">\t\tI = ycbcr2rgb(frame);%RGB图像</span><br><span class=\"line\">\t\timwrite(I,<span class=\"string\">'csdn.png'</span>);</span><br></pre></td></tr></table></figure>\n<p>而加上全局变量后就可以正常运行。</p>\n<p>好了，这样的global函数就说完了。</p>\n<p>题外话：</p>\n<p>最近新型冠状病毒疫情有所好转，我老爸在家把盗墓笔记全部电影电视剧看完了</p>\n<p>现在拉着我们家人一起看斗罗大陆的动画片….(不过还真的挺好看的哈哈哈)</p>\n<p>不说了，赶快陪爸妈看斗罗大陆动画片了…</p>\n<p>希望疫情赶快结束吧！！！</p>\n","url":"/posts/43318/","min2read":3,"word4post":777,"prev_post":{"title":"Win10自带的虚拟机如何打开—Hyper-v","url":"/posts/41206/"},"next_post":{"title":"使用MATLAB调用摄像头并拍照—详细代码","url":"/posts/50105/"},"toc":"","categories":[{"name":"MATLAB","path":"api/categories/MATLAB.json","url":"/categories/MATLAB/"}],"tags":[{"name":"MATLAB","path":"api/tags/MATLAB.json","url":"/tags/MATLAB/"}]}